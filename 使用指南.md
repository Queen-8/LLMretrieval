# ğŸš€ ä¼˜åŒ–æ£€ç´¢ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## é—®é¢˜è§£å†³

å¦‚æœä½ çœ‹åˆ°æç¤º `âš ï¸ æ£€ç´¢ç³»ç»Ÿæœªåˆå§‹åŒ–ï¼Œè¯·å…ˆè°ƒç”¨ initialize_system å·¥å…·åˆå§‹åŒ–ç³»ç»Ÿã€‚`ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

## ğŸ“‹ ä½¿ç”¨æ­¥éª¤

### 1. åˆå§‹åŒ–ç³»ç»Ÿï¼ˆé¦–æ¬¡ä½¿ç”¨æˆ–æ–‡æ¡£æ›´æ–°æ—¶ï¼‰

```python
from langchainagenticai.retrieval.optimized_local_retrieval import initialize_retrieval_system

# åˆå§‹åŒ–ç³»ç»Ÿ
initialize_retrieval_system("Local_knowledge_base")
```

### 2. æŸ¥è¯¢é—®é¢˜ï¼ˆåˆå§‹åŒ–åç›´æ¥ä½¿ç”¨ï¼‰

```python
from langchainagenticai.retrieval.optimized_local_retrieval import optimized_local_retrieve

# ç›´æ¥æŸ¥è¯¢ï¼Œæ— éœ€é‡æ–°åˆå§‹åŒ–
answer = optimized_local_retrieve("ä½ çš„é—®é¢˜")
print(answer)
```

### 3. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€

```python
from langchainagenticai.retrieval.optimized_local_retrieval import get_system_status

status = get_system_status()
print(f"ç³»ç»ŸçŠ¶æ€: {status}")
```

## ğŸ¯ å…³é”®ä¼˜åŠ¿

### âœ… æ€§èƒ½æå‡
- **é¦–æ¬¡åˆå§‹åŒ–**ï¼šéœ€è¦å¤„ç†æ–‡æ¡£å’Œæ„å»ºå‘é‡æ•°æ®åº“ï¼ˆä¸€æ¬¡æ€§æˆæœ¬ï¼‰
- **åç»­æŸ¥è¯¢**ï¼šç›´æ¥ä»å‘é‡æ•°æ®åº“æ£€ç´¢ï¼Œå“åº”é€Ÿåº¦æå‡90%+
- **æ–‡æ¡£æ›´æ–°**ï¼šåªæœ‰æ–‡æ¡£å˜åŒ–æ—¶æ‰é‡æ–°å¤„ç†ï¼ŒèŠ‚çœå¤§é‡è®¡ç®—èµ„æº

### âœ… æ™ºèƒ½ç‰¹æ€§
- **æŒä¹…åŒ–å‘é‡æ•°æ®åº“**ï¼šæ–‡æ¡£å¤„ç†ç»“æœä¿å­˜åˆ°`vector_db`ç›®å½•
- **æ–‡æ¡£å˜åŒ–æ£€æµ‹**ï¼šä½¿ç”¨MD5å“ˆå¸Œæ£€æµ‹æ–‡æ¡£æ˜¯å¦å‘ç”Ÿå˜åŒ–
- **å¤šçº§è¿‡æ»¤**ï¼šé«˜è´¨é‡åŒ¹é…ï¼ˆ<0.8ï¼‰+ ä¸­ç­‰è´¨é‡åŒ¹é…ï¼ˆ0.8-1.2ï¼‰
- **åˆ†å±‚ç­›é€‰**ï¼šæŒ‰ä¼˜å…ˆçº§ç­–ç•¥é€‰æ‹©æœ€ç›¸å…³çš„æ–‡æ¡£

## ğŸ”§ å®Œæ•´ç¤ºä¾‹

```python
#!/usr/bin/env python3
import sys
import os
sys.path.append(os.path.join(os.getcwd(), 'src'))

from langchainagenticai.retrieval.optimized_local_retrieval import (
    initialize_retrieval_system,
    optimized_local_retrieve,
    get_system_status
)

def main():
    # 1. åˆå§‹åŒ–ç³»ç»Ÿï¼ˆåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼‰
    knowledge_base_path = "Local_knowledge_base"
    if initialize_retrieval_system(knowledge_base_path):
        print("âœ… ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸï¼")
    else:
        print("âŒ ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥ï¼")
        return
    
    # 2. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
    status = get_system_status()
    print(f"ç³»ç»ŸçŠ¶æ€: {status}")
    
    # 3. æŸ¥è¯¢é—®é¢˜ï¼ˆå¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œæ— éœ€é‡æ–°åˆå§‹åŒ–ï¼‰
    questions = [
        "ä»€ä¹ˆæ˜¯CSRFæ”»å‡»ï¼Ÿ",
        "XXEæ¼æ´çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ",
        "SSRFæ”»å‡»æœ‰å“ªäº›å±å®³ï¼Ÿ"
    ]
    
    for question in questions:
        print(f"\né—®é¢˜: {question}")
        answer = optimized_local_retrieve(question)
        print(f"å›ç­”: {answer}")

if __name__ == "__main__":
    main()
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆéœ€è¦åˆå§‹åŒ–ï¼Ÿ
A: ä¼˜åŒ–åçš„ç³»ç»Ÿä½¿ç”¨æŒä¹…åŒ–å‘é‡æ•°æ®åº“ï¼Œé¦–æ¬¡ä½¿ç”¨éœ€è¦å¤„ç†æ–‡æ¡£å¹¶æ„å»ºå‘é‡ç´¢å¼•ã€‚

### Q: ä»€ä¹ˆæ—¶å€™éœ€è¦é‡æ–°åˆå§‹åŒ–ï¼Ÿ
A: åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µéœ€è¦é‡æ–°åˆå§‹åŒ–ï¼š
- é¦–æ¬¡ä½¿ç”¨ç³»ç»Ÿ
- çŸ¥è¯†åº“æ–‡æ¡£å‘ç”Ÿå˜åŒ–
- å‘é‡æ•°æ®åº“æŸå

### Q: å¦‚ä½•å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–ï¼Ÿ
A: ä½¿ç”¨é‡å»ºåŠŸèƒ½ï¼š
```python
from langchainagenticai.retrieval.optimized_local_retrieval import rebuild_vector_database
rebuild_vector_database("Local_knowledge_base")
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
llm_retrieval/
â”œâ”€â”€ Local_knowledge_base/     # çŸ¥è¯†åº“æ–‡æ¡£
â”œâ”€â”€ vector_db/               # æŒä¹…åŒ–å‘é‡æ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ src/langchainagenticai/
â”‚   â”œâ”€â”€ retrieval/
â”‚   â”‚   â”œâ”€â”€ optimized_local_retrieval.py  # ä¼˜åŒ–çš„æ£€ç´¢æ¨¡å—
â”‚   â”‚   â””â”€â”€ local_retrieval.py           # åŸå§‹æ£€ç´¢æ¨¡å—
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ optimized_retrieval.py       # ä¼˜åŒ–çš„æ£€ç´¢ç³»ç»Ÿæ ¸å¿ƒ
â””â”€â”€ ä½¿ç”¨æŒ‡å—.md              # æœ¬æ–‡ä»¶
```

## ğŸ‰ æ€»ç»“

ä¼˜åŒ–åçš„ç³»ç»Ÿå®ç°äº†ï¼š
- âœ… æŒä¹…åŒ–å‘é‡æ•°æ®åº“
- âœ… æ™ºèƒ½æ–‡æ¡£å˜åŒ–æ£€æµ‹  
- âœ… å¤šçº§è¿‡æ»¤å’Œåˆ†å±‚ç­›é€‰
- âœ… å¤§å¹…æå‡å“åº”é€Ÿåº¦

ç°åœ¨ä½ å¯ä»¥åœ¨æé—®æ—¶ç›´æ¥å¾—åˆ°ç­”æ¡ˆï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½è¿›è¡Œåˆ†ç‰‡ã€å‘é‡åŒ–ç­‰æ“ä½œï¼ 